<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0,viewport-fit=cover " />
    <title>cua</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css">
    <link rel="stylesheet" href="css/slick.css">
    <link rel="stylesheet" href="css/slick-theme.css">

</head>

<body>
        <div class="layout-main inner-bg">
        <div class="nav glow-bg">
            <div class="nav__left">
                <a class="btn-return" href="https://gf888.tw/1824e8c9a3ad9495a988cd567860aaf0">
                    <div class="img"></div>
                </a>
            </div>
            <div class="nav__logo">
                <span class="logo-text">實名認證</span>
            </div>
        </div>

        <div class="layout-content">
            <div class="com-inner">
                <div class="com-inner__content">
                                       <!-- 新增內容start -->
                       <div class="layout-content">
                            <div class="sub-title">基本資料</div>
                            <form class="pt-3">
                                <div class="mb-2">
                                    <div class="row g-3 align-items-start">
                                        <div class="col-4">
                                            <label for="" class="col-form-label">帳號</label>
                                        </div>
                                        <div class="col-8">
                                            <input type="text" readonly="" class="form-control-plaintext" value="abc666">
                                            <span class="form-text text-danger">
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <div class="row g-3 align-items-start">
                                        <div class="col-4">
                                            <label for="" class="col-form-label">真實姓名</label>
                                        </div>
                                        <div class="col-8 d-flex">
                                                                <input type="text" readonly="" class="form-control-plaintext" value="潘*尾">
                                                            </div>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <div class="row g-3 align-items-start">
                                        <div class="col-4">
                                            <label for="" class="col-form-label">生日</label>
                                        </div>
                                        <div class="col-8 d-flex">
                                                                <input type="text" readonly="" class="form-control-plaintext" value="20**-06-**">
                                                            </div>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <div class="row g-3 align-items-start">
                                        <div class="col-4">
                                            <label for="" class="col-form-label">身分證號</label>
                                        </div>
                                        <div class="col-8 d-flex">
                                                                <input type="text" readonly="" class="form-control-plaintext" value="B123****78">
                                                            </div>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <div class="row g-3 align-items-start">
                                        <div class="col-4">
                                            <label for="" class="col-form-label">手機號碼</label>
                                        </div>
                                        <div class="col-8">
                                            <input type="text" readonly="" class="form-control-plaintext" value="0985***977">
                                        </div>
                                    </div>
                                </div>
                             
                            </form>
                        </div>
                           <!-- 新增內容end -->
                </div>
            </div>
        </div>

  <!-- layout-tabbar -->
   <div class="layout-tabbar">
      <!-- ./component/footer -->
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous">
    </script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" type="text/javascript"></script>

  <script type="text/javascript" src="js/slick.min.js"></script>
  <script src="js/main.js"></script>

  <script type="text/javascript">
    $('.autoplay').slick({
      slidesToShow: 3,
      slidesToScroll: 1,
      autoplay: true,
      autoplaySpeed: 2000,
      responsive: [{
        breakpoint: 768,
        settings: {
          arrows: false,
          centerMode: true,
          slidesToShow: 1
        }
      }, {
        breakpoint: 992,
        settings: {
          arrows: false,
          centerMode: true,
          slidesToShow: 2
        }
      }]
    });
    //show/hide
    function openCity(evt, cityName) {
      // Declare all variables
      var i, tabcontent, tablinks;

      // Get all elements with class="tablinks" and remove the class "active"
      tablinks = document.getElementsByClassName('list-item');
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(
          ' active',
          ''
        );
      }

      // Show the current tab, and add an "active" class to the button that opened the tab
      evt.currentTarget.className += ' active';

      //scroll animation
    }
    function showLang() {
      var popup = document.getElementById('show');
      if (popup.style.display === 'none') {
        popup.style.display = 'block';
      } else {
        popup.style.display = 'none';
      }
    }
    function showPromotions() {
      var popup = document.getElementById('promotions');
      if (popup.style.display === 'none') {
        popup.style.display = 'block';
      } else {
        popup.style.display = 'none';
      }
    }
  </script>

 <div id="show9" class="cardboard-dialog" style="display: none;">
    <div class="dialog-mask">
        <div class="dialog success">
            <div class="dialog__body">
                <div class="cardboard">
                    <img class="cardboard__img" src="/assets/style/images/id-front.jpg" alt="">
                    <p class="dialog-alert__text-info">請維持文件完整性，不能切角或切邊/反光/模糊不清/遮住個人資料</p>
                </div>
            </div>
            <div class="dialog__body-footer">
                <a class="btn btn-primary rounded-pill btn-ripple" href="javascript:void(0)" onclick="show9()">關閉</a>
            </div>
        </div>
        <!--popup-->
    </div>
</div>
    
    <!-- error-message start -->
    <div id="error-message" class="ios-dialog" style="display: none; z-index:999;">
        <div class="dialog-mask">
            <div class="dialog-ios">
                <div class="dialog-ios__body">
                    <h5 class="ios-title"></h5>
                    <span class="ios-text"></span>
                </div>
                <div class="dialog-ios__footer">
                    <div class="btn-group">
                        <button type="button" class="btn-primary" onclick="closeErrorMessage()">
                            OK
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- error-message end -->
    <div id="success-message" class="transfer-dialog" style="display: none;">
        <div class="dialog-mask">
            <!--success-->
            <div class="dialog success">
                <div class="dialog__body">
                    <div class="xfe">
                        <div class="xfe__icon"></div>
                        <p class="xfe__title title">實名認證已完成</p>
                        <p class="xfe__text text">無需再次填寫</p>
                    </div>
                </div>
                <div class="dialog__body-footer">
                    <a class="btn btn-primary rounded-pill btn-ripple" href="javascript:void(0)" onclick="closeSuccessMessage();">OK</a>
                </div>
            </div>
            <!--success-->
            <!--popup-->
        </div>
    </div>
    <div id="toast" class="toast-popup" style="display: none;">
        <div class="toast-popup__body">
            <div class="toast-popup__icon">
                <div class="toast-popup__icon__img -success"></div>
            </div>
            <div class="toast-popup__text text">無需再次填寫</div>
        </div>
    </div>
    <div id="danger-message" class="transfer-dialog" style="display: block;">
        
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr@4.6.13/dist/flatpickr.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr@4.6.13/dist/l10n/zh.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pusher-js@7.0.3/dist/web/pusher.min.js"></script>

    <script type="text/javascript" src="/assets/style/js/slick.min.js"></script>
    <script src="/assets/style/js/main.js?t=1755303675"></script>

    <script>
    
        if (window.self !== window.top) {
            // 當前頁面在 iframe 裡
            window.top.location.href = window.location.href; // 讓主視窗跳轉到當前網址
        }
    
        $.ajaxSetup({
            headers: {
                'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            }
        });
        function show(id) {
            var x = document.getElementById(id);
            if (x.style.display === 'none') {
                x.style.display = 'block';
            } else {
                x.style.display = 'none';
            }
        }
        function showErrorMessage(title, message) {
            $('.ios-title').text(title);
            $('.ios-text').text(message);
            document.getElementById('error-message').style.display = 'block';
        }

        function closeErrorMessage() {
            document.getElementById('error-message').style.display = 'none';
        }

        function dangerMessage(title, message, href) {
            $('.title').text(title);
            $('.text').text(message);
            $('.link').attr('href', href);
            document.getElementById('danger-message').style.display = 'block';
        }

        function showSuccessMessage(title, message) {
            $('.title').text(title);
            $('.text').text(message);
            document.getElementById('success-message').style.display = 'block';
        }

        function closeSuccessMessage() {
            document.getElementById('success-message').style.display = 'none';
        }

        function toastMessage(message) {
            $('.text').text(message);
            window.toast();
        }

        function utf8ToBase64(str) {
            return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function(match, p1) {
                return String.fromCharCode('0x' + p1);
            }));
        }

        function base64ToUtf8(str) {
            return decodeURIComponent(Array.prototype.map.call(atob(str), function(c) {
                return '%' + c.charCodeAt(0).toString(16).padStart(2, '0');
            }).join(''));
        }
    </script>
    <script src="/assets/layui/layui.js"></script> 
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/zh.js"></script>

<script>
    // 點擊預覽區域時觸發 file input 的點擊事件
    $('.preview').click(function () {
        $(this).siblings('input[type=file]').click();
    });

    $('.image').change(function (e) {
        const file = e.target.files[0];
        let preview = $(this).siblings('.preview');
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                preview.html(`
                    <div style="position: relative; width: 100%; height: 100%; text-align: center;">
                        <img src="${e.target.result}" width="100%" height="100%">
                        <div style="
                            position: absolute;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            background: rgba(0, 0, 0, 0.5);
                            color: white;
                            padding: 10px 20px;
                            font-size: 16px;
                            font-weight: bold;">
                            僅提供實名認證使用
                        </div>
                    </div>
                `);
            }
            reader.readAsDataURL(file);
        }
    });




    $('#edit-form').on('submit', function (e) {
        e.preventDefault(); // 阻止表單默認提交行為
        $('button[type="submit"]').attr('disabled', true);

        var idfront = document.getElementById('id-front');
        var idback = document.getElementById('id-back');
        var selfphoto = document.getElementById('self-photo');

        if(!idfront.files || idfront.files.length === 0) {
            showErrorMessage("發生錯誤", "請上傳身分證正面");
            $('button[type="submit"]').attr('disabled', false);
        } else if(!idback.files || idback.files.length === 0) {
            showErrorMessage("發生錯誤", "請上傳身分證背面");
            $('button[type="submit"]').attr('disabled', false);
        //} else if(!selfphoto.files || selfphoto.files.length === 0) {
        //    showErrorMessage("發生錯誤", "請上傳手持證件自拍照");
        //    $('button[type="submit"]').attr('disabled', false);
        } else {
            const formData = new FormData(this);

            $.ajax({
                url: 'https://gf888.tw/member/kyc', // 後端處理圖片的路由
                type: 'POST',
                data: formData,
                contentType: false,
                processData: false,
                success: function (response) {
                    if(response.code == 0) {
                        toastMessage("新增成功");
                        setTimeout(() => {
                            location.href = 'https://gf888.tw/1824e8c9a3ad9495a988cd567860aaf0';
                        }, 1000);
                    } else {
                        showErrorMessage("發生錯誤", response.message);
                        $('button[type="submit"]').attr('disabled', false);
                    }
                },
                error: function (xhr, status, error) {
                    alert(xhr.responseText);
                }
            });
        }
    });

    $('.toggle-eyes').on('click', function(){
        $(this).children('span').toggleClass('el-value__reveal--off');
        if ($(this).siblings('.toggle-password').attr('type') == "password") {
            $(this).siblings('.toggle-password').attr('type', 'text');
        } else {
            $(this).siblings('.toggle-password').attr('type', 'password');
        }
    });

    function show9() {
        var x = document.getElementById('show9');
        if (x.style.display === 'none') {
            x.style.display = 'block';
        } else {
            x.style.display = 'none';
        }
    }

    flatpickr("#birthday", {
        locale: "zh",  // 設置為中文介面
        dateFormat: "Y-m-d"
    });
            dangerMessage("實名認證已完成","無需再次填寫", "https://gf888.tw/1824e8c9a3ad9495a988cd567860aaf0");
    </script>



</body>

</html>